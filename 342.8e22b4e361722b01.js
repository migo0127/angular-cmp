"use strict";(self.webpackChunkangular_cmp=self.webpackChunkangular_cmp||[]).push([[342],{8342:(lt,y,i)=>{i.r(y),i.d(y,{OrderModule:()=>ct});var C=i(9299),t=i(4650);let T=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order"]],decls:1,vars:0,template:function(e,r){1&e&&t._UZ(0,"router-outlet")},dependencies:[C.lC]}),o})();var P=i(8739),f=i(6308),p=i(7155),b=i(8372),L=i(1884),d=(()=>{return(o=d||(d={}))[o.LESS=0]="LESS",o[o.MORE=1]="MORE",o[o.EQUAL=2]="EQUAL",d;var o})(),S=i(8880),h=i(4006),u=i(5412),_=i(4004),Q=i(529);let W=(()=>{class o{constructor(e){this.http=e}getOrderList(){return this.http.get("assets/mock-data/order-list-mock.json").pipe((0,_.U)(e=>e.orderList))}getHistoryPriceData(e){return this.http.get("assets/mock-data/order-list-price-chart-mock.json").pipe((0,_.U)(r=>r.historicalPrice[e]))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Q.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=i(350),A=i(4859),D=i(7314),x=i(9549),N=i(4144),w=i(4385),F=i(3238),v=i(1948),J=i(266),O=i(6895),Y=i(8326);const E=["historyPriceChartDialog"];function R(o,n){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function j(o,n){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function B(o,n){if(1&o&&t._UZ(0,"mat-slider",31),2&o){const e=t.oxw();t.Q6J("displayWith",e.formatLabel)("min",e.areaRange.totalMin)("max",e.areaRange.totalMax)}}function V(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1," Category "),t.qZA())}function q(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.category," ")}}function H(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1," Product "),t.qZA())}function I(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.product," ")}}function G(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1," Price "),t.qZA())}function z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",34),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.showHistoryPrice(l))}),t._uU(1),t.ALo(2,"number"),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.hij(" $",t.lcZ(2,1,+e.price)," ")}}function $(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1," Sale Qty "),t.qZA())}function X(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,+e.saleQty)," ")}}function k(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1," Total "),t.qZA())}function K(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" $",t.lcZ(2,1,+e.total)," ")}}function tt(o,n){1&o&&t._UZ(0,"tr",35)}function et(o,n){1&o&&t._UZ(0,"tr",36)}function ot(o,n){if(1&o&&t._UZ(0,"app-chart-js",44),2&o){const e=t.oxw(2);t.Q6J("type",e.mixedChartType)("data",e.mixedChartData)("options",e.mixedChartOptions)}}function rt(o,n){if(1&o&&(t.TgZ(0,"section",37)(1,"h1",38),t._uU(2," Historical Price Trends\uff1a "),t.TgZ(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div",39)(6,"div",40),t.YNc(7,ot,1,3,"app-chart-js",41),t.qZA()(),t.TgZ(8,"div",42)(9,"button",43),t._uU(10," Close "),t.qZA()()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.currentRow.product),t.xp6(3),t.Q6J("ngIf",e.mixedChartData)}}const nt=[{path:"",component:T,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,r,a,l){this.fb=e,this.dialog=r,this.orderService=a,this.chartOptionsUtilService=l,this.displayedColumns=["category","product","price","saleQty","total"],this.pageSizeOptions=[5,10],this.searchForm=this.fb.group({category:[""],product:[""],price:[""],saleQty:[""],total:[""],operator:["1"]})}get categoryControl(){return this.searchForm.get("category")}get productControl(){return this.searchForm.get("product")}get priceControl(){return this.searchForm.get("price")}get saleQtyControl(){return this.searchForm.get("saleQty")}get totalControl(){return this.searchForm.get("total")}get operatorControl(){return this.searchForm.get("operator")}ngOnInit(){this.orderService.getOrderList().subscribe(e=>{this.originDataSource=JSON.parse(JSON.stringify(e)),this.getItemMinMaxRange(e),this.categoryList=this.getOptionList(e,"category"),this.productList=this.getOptionList(e,"product"),this.createMatTableDataSource(e),this.bindFormValueChanges()})}createMatTableDataSource(e){this.dataSource=new p.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getOptionList(e,r){const a=new Set;for(let s of e)a.add(s[r]);return Array.from(a).sort()}getItemMinMaxRange(e){const r=JSON.parse(JSON.stringify(e)),a=r.slice().sort((m,g)=>+m.price-+g.price),l=r.slice().sort((m,g)=>+m.saleQty-+g.saleQty),s=r.slice().sort((m,g)=>+m.total-+g.total);this.areaRange={priceMin:+a[0]?.price,priceMax:+a[a.length-1]?.price,saleQtyMin:+l[0]?.saleQty,saleQtyMax:+l[l.length-1]?.saleQty,totalMin:+s[0]?.total,totalMax:+s[s.length-1]?.total},this.totalControl.patchValue(this.areaRange.totalMin.toString(),{emitEvent:!1})}bindFormValueChanges(){Object.keys(this.searchForm.controls).forEach(e=>{const r=this.searchForm.get(e);r.valueChanges.pipe((0,b.b)(500),(0,L.x)()).subscribe(a=>{("price"===e||"saleQty"===e)&&r.patchValue(this.detectNumber(a),{emitEvent:!1}),this.searchData()})})}detectNumber(e){return e?.trim().replace(/[^\d]*/g,"")}formatLabel(e){return e>=1e3?Math.round(e/1e3)+"k":e}clearSearch(){this.categoryControl.patchValue("",{emitEvent:!1}),this.productControl.patchValue("",{emitEvent:!1}),this.priceControl.patchValue("",{emitEvent:!1}),this.saleQtyControl.patchValue("",{emitEvent:!1}),this.totalControl.patchValue(this.areaRange.totalMin.toString(),{emitEvent:!1}),this.operatorControl.patchValue("1",{emitEvent:!1}),this.searchData()}searchData(){let e=this.originDataSource.filter(c=>c.category===this.categoryControl.value);e=e.length?e:this.originDataSource,this.productList=this.getOptionList(e,"product");let r=e.filter(c=>this.productControl.value.includes(c.product));r=r.length?r:e;const a=+this.operatorControl.value,l=+this.priceControl.value,s=+this.saleQtyControl.value,m=+this.totalControl.value;let g=r;l&&(g=r.filter(c=>a===d.LESS?+c.price<=l:a===d.MORE?+c.price>=l:+c.price===l));let M=g;s&&(M=g.filter(c=>a===d.LESS?+c.saleQty<=s:a===d.MORE?+c.saleQty>=s:+c.saleQty===s));let Z=M;m&&(Z=M.filter(c=>a===d.LESS?+c.total<=m:a===d.MORE?+c.total>=m:+c.total===m)),this.createMatTableDataSource(Z)}showHistoryPrice(e){this.currentRow=e,this.orderService.getHistoryPriceData(e.label).subscribe(r=>{this.mixedChartType=S.m.BAR,this.mixedChartData=r;const a=this.chartOptionsUtilService.getBaseBarChartOptions();this.mixedChartOptions=a,this.dialog.open(this.historyPriceChartDialog)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.qu),t.Y36(u.uw),t.Y36(W),t.Y36(U.R))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-list"]],viewQuery:function(e,r){if(1&e&&(t.Gf(f.YE,5),t.Gf(P.NW,5),t.Gf(E,5)),2&e){let a;t.iGM(a=t.CRH())&&(r.sort=a.first),t.iGM(a=t.CRH())&&(r.paginator=a.first),t.iGM(a=t.CRH())&&(r.historyPriceChartDialog=a.first)}},decls:62,vars:11,consts:[[1,"searchWrap"],[3,"formGroup"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["multiple","","formControlName","product"],["matInput","","type","text","formControlName","price","maxlength","9"],["matInput","","type","text","formControlName","saleQty","maxlength","9"],[1,"totalWrap"],["thumbLabel","","formControlName","total","tickInterval","1000","step","1000","aria-label","units",3,"displayWith","min","max",4,"ngIf"],[1,"operatorWarp"],["formControlName","operator","aria-label","Select an option"],["matTooltip","Less than or equal to the price range, qty range and total amount","value","0"],["matTooltip","More than or equal to the price range, qty range and total amount","value","1"],["value","2"],[1,"btnWrap"],["mat-raised-button","","color","primary",3,"click"],[1,"tableWrap"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","category"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product"],["matColumnDef","price"],["mat-cell","","class","cursor price",3,"click",4,"matCellDef"],["matColumnDef","saleQty"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["historyPriceChartDialog",""],[3,"value"],["thumbLabel","","formControlName","total","tickInterval","1000","step","1000","aria-label","units",3,"displayWith","min","max"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"cursor","price",3,"click"],["mat-header-row",""],["mat-row",""],[1,"historyPriceChartWrap"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"chartContainer"],[3,"type","data","options",4,"ngIf"],["mat-dialog-actions",""],["mat-raised-button","","mat-dialog-close","","color","primary"],[3,"type","data","options"]],template:function(e,r){1&e&&(t.TgZ(0,"div")(1,"section",0)(2,"form",1)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Category"),t.qZA(),t.TgZ(6,"mat-select",2),t.YNc(7,R,2,2,"mat-option",3),t.qZA()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Product"),t.qZA(),t.TgZ(11,"mat-select",4),t.YNc(12,j,2,2,"mat-option",3),t.qZA()(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Price Range"),t.qZA(),t._UZ(16,"input",5),t.qZA(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Sale Qty Range"),t.qZA(),t._UZ(20,"input",6),t.qZA(),t.TgZ(21,"div",7)(22,"div")(23,"label"),t._uU(24,"Total:"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.ALo(27,"number"),t.qZA()(),t.YNc(28,B,1,3,"mat-slider",8),t.qZA(),t.TgZ(29,"div",9)(30,"mat-radio-group",10)(31,"mat-radio-button",11),t._uU(32," Less "),t.qZA(),t.TgZ(33,"mat-radio-button",12),t._uU(34," More "),t.qZA(),t.TgZ(35,"mat-radio-button",13),t._uU(36,"Equal"),t.qZA()()()()(),t.TgZ(37,"section",14)(38,"button",15),t.NdJ("click",function(){return r.clearSearch()}),t._uU(39," Clear "),t.qZA()(),t.TgZ(40,"section",16)(41,"table",17),t.ynx(42,18),t.YNc(43,V,2,0,"th",19),t.YNc(44,q,2,1,"td",20),t.BQk(),t.ynx(45,21),t.YNc(46,H,2,0,"th",19),t.YNc(47,I,2,1,"td",20),t.BQk(),t.ynx(48,22),t.YNc(49,G,2,0,"th",19),t.YNc(50,z,3,3,"td",23),t.BQk(),t.ynx(51,24),t.YNc(52,$,2,0,"th",19),t.YNc(53,X,3,3,"td",20),t.BQk(),t.ynx(54,25),t.YNc(55,k,2,0,"th",19),t.YNc(56,K,3,3,"td",20),t.BQk(),t.YNc(57,tt,1,0,"tr",26),t.YNc(58,et,1,0,"tr",27),t.qZA(),t._UZ(59,"mat-paginator",28),t.qZA(),t.YNc(60,rt,11,2,"ng-template",null,29,t.W1O),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",r.searchForm),t.xp6(5),t.Q6J("ngForOf",r.categoryList),t.xp6(5),t.Q6J("ngForOf",r.productList),t.xp6(14),t.hij("$",t.lcZ(27,9,+r.totalControl.value),""),t.xp6(2),t.Q6J("ngIf",r.areaRange),t.xp6(13),t.Q6J("dataSource",r.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",r.pageSizeOptions))},dependencies:[A.lW,D.pH,x.KE,x.hX,N.Nt,u.ZT,u.uh,u.xY,u.H8,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,P.NW,f.YE,f.nU,w.gD,F.ey,v.VQ,v.U0,J.gM,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,O.sg,O.O5,Y.y,O.JJ],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}p[_ngcontent-%COMP%]{margin:0;padding:0}input[_ngcontent-%COMP%]{font-size:1rem}.cursor[_ngcontent-%COMP%]{cursor:pointer}.searchWrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.searchWrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%], .searchWrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:calc(100% - 2rem)}.searchWrap[_ngcontent-%COMP%]   .totalWrap[_ngcontent-%COMP%]{display:flex;flex-direction:column}.searchWrap[_ngcontent-%COMP%]   .totalWrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#757575;margin-right:.5rem}.searchWrap[_ngcontent-%COMP%]   .totalWrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.05rem;color:#5991fa}.searchWrap[_ngcontent-%COMP%]   .totalWrap[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.searchWrap[_ngcontent-%COMP%]   .operatorWarp[_ngcontent-%COMP%]{margin:auto 0}.searchWrap[_ngcontent-%COMP%]   .operatorWarp[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:.55rem}@media screen and (max-width: 1024px) and (min-width: 390px){.operatorWarp[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.operatorWarp[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:0;margin-bottom:.75rem}}@media screen and (max-width: 740px){.searchWrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media screen and (max-width: 414px){.searchWrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{grid-template-columns:1fr}.operatorWarp[_ngcontent-%COMP%]{margin-top:1.05rem!important}.operatorWarp[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.operatorWarp[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:.75rem;margin-bottom:0}.btnWrap[_ngcontent-%COMP%]{text-align:right}}.btnWrap[_ngcontent-%COMP%]{margin-bottom:1.25rem}.tableWrap[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%}.tableWrap[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tableWrap[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100px;word-break:break-all}.tableWrap[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 .25rem}.tableWrap[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.price[_ngcontent-%COMP%]{color:#5991fa;text-decoration:underline}@media screen and (max-width: 540px){th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{width:50px}}.historyPriceChartWrap[_ngcontent-%COMP%]{display:grid;width:65vw;height:65vh;grid-template:1fr;grid-template-rows:minmax(6vh,50px) 1fr minmax(6vh,50px);align-items:center}.historyPriceChartWrap[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{border-bottom:2px double rgba(224,224,224,.5)}.historyPriceChartWrap[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%], .historyPriceChartWrap[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .chartContainer[_ngcontent-%COMP%]{height:100%}.historyPriceChartWrap[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 540px){.historyPriceChartWrap[_ngcontent-%COMP%]{height:45vh}}"]}),o})()},{path:"**",redirectTo:"list"}]},{path:"**",redirectTo:"list"}];let at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(nt),C.Bz]}),o})();var it=i(4710);let ct=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[it.G,at]}),o})()}}]);